fire_concentration = {
    track = combat_support
    name = SUBDOCTRINE_FIRE_CONCENTRATION
    description = SUBDOCTRINE_FIRE_CONCENTRATION_DESC
    icon = GFX_doctrine_fire_concentration_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 75
            original_tag = SOV
        }
        modifier = {
            factor = 75
            original_tag = ENG
        }
        modifier = {
            factor = 75
            original_tag = FRA
        }   
    }

     # EFFECTS
     enable_tactic = tactic_overwhelming_fire

     artillery_brigade = {
        combat_width = -0.8
     }

     rewards = {
        standing_barrage = {
        #1
            category_line_artillery = {
                max_organisation = 5
            }
        }
        predicted_fire = {
        #2
            category_line_artillery = {
                soft_attack = 0.1
            }
        }
        artillery_groups = {
        #3
            category_line_artillery = {
                breakthrough = 0.1
            }
        }
        dedicated_air_support = {
        #4
            category_line_artillery = {
               soft_attack = 0.1
            }
        }
        weakpoint_studies = {
        #5
            category_line_artillery = {
                breakthrough = 0.1
            }
        }
    }
}

anti_tank_frontline = {
    track = combat_support
    name = SUBDOCTRINE_ANTI_TANK_FRONT
    description = SUBDOCTRINE_ANTI_TANK_FRONT_DESC
    icon = GFX_doctrine_antitank_frontline_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = { base = 0 }

     # EFFECTS
     

    engineer = {
        battalion_mult = {
            category = category_line_artillery
            entrenchment = 0.2
            add = yes
        }
    }

    rewards = {
        pakfront = {
        #1
            anti_tank_brigade = {
                ap_attack = 0.05
            }
        }
        emplacement_rotation = {
        #2
            anti_tank_brigade = {
                max_organisation = 5
            }
        }
        weakpoint_studies = {
        #3
            anti_tank_brigade = {
                hard_attack = 0.05
            }
        }
        offensive_deployments = {
        #4
            mot_anti_tank_brigade = {
                breakthrough = 0.2
                ap_attack = 0.1
            }
        }
        assault_anti_tank = {
        #5
            mot_anti_tank_brigade = {
                hard_attack = 0.1
            }
        }
    }
}

flying_batteries = {
    track = combat_support
    name = SUBDOCTRINE_FLYING_BATTERIES
    description = SUBDOCTRINE_FLYING_BATTERIES_DESC
    icon = GFX_doctrine_flying_batteries_medium

    xp_cost = 100
    xp_type = army

    available = {
    
    }
    visible = {
        has_dlc = "No Compromise, No Surrender"
    }

    
    ai_will_do = {
        base = 1

        modifier = {
            factor = 0 
            NOT = { has_tech = rocket_artillery } 
        }
    }

     # EFFECTS

    motorized_rocket_brigade = {
        soft_attack = 0.1
    }

    rewards = {
        deployment_drills = {
            mot_rocket_artillery_brigade = {
                default_morale = 0.1
            }
        }
        counter_battery_tasks = {
            
            recon = {
                battalion_mult = {
                    category = category_rocket_artillery #there should be a motorized arty only cat
                    soft_attack = 0.05
                    defense = 0.1
                }
                recon = 0.25
            }
        }
        ballistics_corrections = {
            armored_signal = {
                battalion_mult = {
                    category = category_rocket_artillery
                    initiative = 0.02
                    supply_consumption = -0.01
                }
            }
        }
        mobile_barrages = {
            motorized_rocket_brigade = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
            category_vehicle_infantry = {
                maximum_speed = 0.1
            }

        }
        wide_dispersal_positions = {
            motorized_rocket_brigade = {
                breakthrough = 0.1
            }
        }
    }
}

air_cavalry = {
    track = combat_support
    name = SUBDOCTRINE_AIR_CAVALRY
    description = SUBDOCTRINE_AIR_CAVALRY_DESC
    icon = GFX_doctrine_air_cavalry_medium

    xp_cost = 100
    xp_type = army

    available = {
        is_special_project_completed = sp:sp_air_helicopter
    }
    visible = {
        has_dlc = "Gotterdammerung"
    }   

    ai_will_do = { base = 0 }

     # EFFECTS
    effect = {
        add_tech_bonus = {
            bonus = 0.5
            uses = 2
            category = helicopter_tech
            name = SUBDOCTRINE_AIR_CAVALRY
        }
    }

     rewards = {
        airborne_observers = { 
            helicopter_recon = {
                battalion_mult = {
                    category = category_artillery
                    soft_attack = 0.1
                }
                max_organisation = 5
            }
        }
        service_and_support = {
            category_helicopter_support_companies = {
                max_strength = 0.02
            }
        }
        rescue_liasions = {
            helicopter_field_hospital = {
            battalion_mult = {
                category = category_all_infantry
                    max_strength = 0.05 
                    default_morale = 0.05 
                }
                max_organisation = 5
                casualty_trickleback = 0.05
            }
        }

        transport_assault = {
            helicopter_transport = {
                battalion_mult = {
                    category = category_light_infantry
                    breakthrough = 0.05
                }
                breakthrough = 0.05
                max_organisation = 5
            }
                
        }
        intervention_units = {
            helicopter_brigade = {
                battalion_mult = {
                    category = category_all_infantry
                    soft_attack = 0.1
                }
                max_organisation = 5
                
            }
        }
 

     }
}

mobile_recon_and_assault = {
    track = combat_support
    name = SUBDOCTRINE_MOBILE_RECON_AND_ASSAULT
    description = SUBDOCTRINE_MOBILE_RECON_AND_ASSAULT_DESC
    icon = GFX_doctrine_mobile_recon_assault_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }
    visible = {
        has_dlc = "La Resistance"
    }
    
    ai_will_do = {

        base = 1
        modifier = {
            factor = 75
            original_tag = GER
        }
        modifier = {
            factor = 75
            original_tag = USA
        }
        modifier = {
            factor = 0
            is_major = no
        }
    }
    

    armored_car_recon = {
        max_organisation = 5
    }
    light_tank_recon = {
        max_organisation = 3
    }

    rewards = {

        motorization_support = {
            light_tank_recon = {
                battalion_mult = {
                    category = category_all_armor
                    hard_attack = 0.05
                }
            }
            armored_car_recon = {
                battalion_mult ={
                    category = category_all_armor
                    soft_attack = 0.5
                }
            }

        }
        long_range_reconnaissance = {
            category_recon = {
                fuel_consumption = -0.05
            }
        }
        mobile_operational_deployments = {
            category_recon = {
                recon = 0.15
            }
        }
        self_propelled_support_elements = {
            category_recon = {
                maximum_speed = 0.15
            }
        }
        deep_reconnaissance_focus = {
            category_recon = {
                soft_attack = 0.05
                hard_attack = 0.05
                breakthrough = 0.1
            }
        }
    }
}

mobile_recon_and_assault_no_lar = {
    track = combat_support
    name = SUBDOCTRINE_MOBILE_RECON_AND_ASSAULT
    description = SUBDOCTRINE_MOBILE_RECON_AND_ASSAULT_DESC
    icon = GFX_doctrine_mobile_recon_assault_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }
    visible = {
        NOT = {
            has_dlc = "La Resistance"
        }
    }

    
    ai_will_do = {

        base = 1
        modifier = {
            factor = 75
            original_tag = GER
        }
        modifier = {
            factor = 75
            original_tag = USA
        }
        modifier = {
            factor = 0
            is_major = no
        }
    }
    

    armored_car_recon = {
        max_organisation = 5
    }
    light_tank_recon = {
        max_organisation = 3
    }

    rewards = {

        motorization_support = {
            light_tank_recon = {
                battalion_mult = {
                    category = category_all_armor
                    hard_attack = 0.05
                }
            }
            armored_car_recon = {
                battalion_mult ={
                    category = category_all_armor
                    soft_attack = 0.5
                }
            }

        }
        long_range_reconnaissance = {
            category_recon = {
                fuel_consumption = -0.05
            }
        }
        mobile_operational_deployments = {
            category_recon = {
                recon = 0.15
            }
        }
        self_propelled_support_elements = {
            category_recon = {
                maximum_speed = 0.15
            }
        }
        deep_reconnaissance_focus = {
            category_recon = {
                soft_attack = 0.05
                hard_attack = 0.05
                breakthrough = 0.1
            }
        }
    }
}

self_propelled_support = {

    track = combat_support
    name = SUBDOCTRINE_SELF_PROPELLED_SUPPORT
    description = SUBDOCTRINE_SELF_PROPELLED_SUPPORT_DESC
    icon = GFX_doctrine_self_propelled_support_medium

    xp_cost = 100
    xp_type = army

    available = {
       
    }
    visible = {
        has_dlc = "No Compromise, No Surrender"
    }


    ai_will_do = { base = 0 }


    category_self_propelled_artillery = {
        soft_attack = 0.1
    }
    category_self_propelled_anti_air= {
        air_attack = 0.1
    }
    category_tank_destroyers = {
        hard_attack = 0.05
    }


    rewards = {

        mobile_battery_management_platoons = {
            category_self_propelled_artillery = {
                max_organisation = 5
            }
            category_self_propelled_anti_air= {
                max_organisation = 5
            }
        }
        screening_attacks = {
            category_self_propelled_anti_air = {
                air_attack = 0.1
            }
            category_self_propelled_artillery = {
                soft_attack = 0.5
            }
            
        }
        all_terrain_mobility = {
            category_self_propelled_artillery = {
                urban = {
                    attack = 0.05
                }
                forest = {
                    attack = 0.05
                }
            }
            category_self_propelled_anti_air= {
                urban = {
                    attack = 0.1
                }
                forest = {
                    attack = 0.1
                }
            }
        }
        multirole_support_vehicles = {
            category_self_propelled_artillery = {
                breakthrough = 0.1
            }
            category_self_propelled_anti_air= {
                soft_attack = 0.1
                hard_attack = 0.05
            }
        }
        shoot_and_scoot = {
            category_self_propelled_artillery = {
                max_organisation = 5
                default_morale = 0.2
            }
            category_self_propelled_anti_air= {
                max_organisation = 5
                default_morale = 0.2
            }
        }

    }

    
}

siege_artillery = {
    track = combat_support
    name = SUBDOCTRINE_SIEGE_ARTILLERY
    description = SUBDOCTRINE_SIEGE_ARTILLERY_DESC
    icon = GFX_doctrine_siege_artillery_medium

    xp_cost = 100
    xp_type = army

    available = {
        is_special_project_completed = sp:sp_land_super_heavy_howitzer

    }
    visible = {
        has_dlc = "Gotterdammerung"
    }

    ai_will_do = { base = 0 }

    super_heavy_artillery = {
        battalion_mult = {
            category = category_army
            soft_attack = 0.1
            defense = 0.1
        }
    }

    rewards = {

        fortress_busters = {
            super_heavy_artillery = {
                soft_attack = 0.05
            }
            self_propelled_super_heavy_artillery = {
                soft_attack = 0.05
            }
        }
        improved_transport_preparation = {
            category_line_artillery = {
                default_morale = 0.2
            }
            super_heavy_artillery = {
                plains = {
                    movement = 0.1
                }
            }
            self_propelled_super_heavy_artillery = {
                plains = {
                    movement = 0.1
                }
            }

            equipment_bonus = {
                railway_gun_equipment = {
                    railway_gun_hours_between_redistribution = -0.5
                    instant = yes
                }
                super_heavy_railway_gun_equipment = {
                    railway_gun_hours_between_redistribution = -0.5
                    instant = yes
                }
            }
        }
        precomputed_firing_data = {
            super_heavy_artillery = {
                max_organisation = 5
            }
            self_propelled_super_heavy_artillery = {
                max_organisation = 5
            }

        }
        urban_strongpoint_sieges = {

            category_artillery = {
                soft_attack = 0.05
            }
        }
        mobile_artillery_command = {
            self_propelled_super_heavy_artillery = {
                max_organisation = 5
                maximum_speed = 0.2
            }

            equipment_bonus = {
                railway_gun_equipment = {
                    maximum_speed = 0.5
                    instant = yes
                }
                super_heavy_railway_gun_equipment = {
                    maximum_speed = 0.5
                    instant = yes
                }

            }
        }
    }
}

field_engineering = {
    track = combat_support
    name = SUBDOCTRINE_FIELD_ENGINEERING
    description = SUBDOCTRINE_FIELD_ENGINEERING_DESC
    icon = GFX_doctrine_field_engineering_medium

    xp_cost = 100
    xp_type = army

    ai_will_do = { 
        base = 1
        modifier = {
            factor = 75
            original_tag = ITA
        }
        modifier = {
            factor = 75
            original_tag = JAP
        }
    }

    engineer = {
        river = {
            movement = 0.2
        }
        forest = {
            movement = 0.2
        }
    }
    assault_engineer = {
        river = {
            movement = 0.2
        }
        forest = {
            movement = 0.2
        }
    }
    pioneer_support = {
        river = {
            movement = 0.2
        }
        forest = {
            movement = 0.2
        }
    }
    #TODO_JBE: replace with category of engineers
    rewards = {
        rapid_fire_lane_clearance = {
            engineer = {
                max_organisation = 5
            }
            maintenance_company = {
                max_organisation = 5
            }
            
        }
        sapper_fieldcraft = {
            engineer = {
                max_strength = 0.25
            }
            maintenance_company = {
                max_strength = 0.25
            }
        }
        engineerdug_gun_emplacements = {
            max_dig_in_factor = 0.05
        }
        smoke_projector_training = {
            army_intel_to_others = -10.0
        }
        charge_and_flame = {
            engineer = {
                breakthrough = 0.5 
            }
            maintenance_company = {
                defense = 0.5
            }
        }

    }
}
